<!DOCTYPE html>
<html lang="kk">
<head>
  <meta charset="UTF-8" />
  <title>Mini LMS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    :root {
      --bg-main: #020617;
      --bg-card: #020617;
      --bg-elevated: #020617;
      --accent: #38bdf8;
      --accent-soft: rgba(56,189,248,0.15);
      --text-main: #e5e7eb;
      --text-muted: #9ca3af;
      --border-subtle: #1f2937;
      --danger: #f97373;
      --success: #4ade80;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #0f172a 0, #020617 50%, #020617 100%);
      color: var(--text-main);
    }

    .app {
      max-width: 460px;
      margin: 0 auto;
      padding: 12px 16px 24px;
    }

    /* Header bar */
    .topbar {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(148,163,184,0.3);
      background: linear-gradient(135deg, rgba(15,23,42,0.95), rgba(15,23,42,0.8));
      backdrop-filter: blur(10px);
      margin-bottom: 16px;
    }
    .topbar-title {
      font-size: 16px;
      font-weight: 600;
    }
    .topbar-sub {
      font-size: 11px;
      color: var(--text-muted);
    }
    .topbar-badge {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      background: var(--accent-soft);
      color: var(--accent);
      border: 1px solid rgba(56,189,248,0.4);
    }

    /* Card */
    .card {
      background: rgba(15,23,42,0.95);
      border-radius: 16px;
      padding: 14px 14px 18px;
      border: 1px solid var(--border-subtle);
      box-shadow: 0 18px 40px rgba(15,23,42,0.8);
      margin-bottom: 16px;
    }

    .card-title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    /* Form controls */
    label {
      font-size: 13px;
      margin-top: 8px;
      margin-bottom: 4px;
      display: block;
      color: var(--text-muted);
    }

    select {
      width: 100%;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid #4b5563;
      background: #020617;
      color: var(--text-main);
      font-size: 13px;
      margin-bottom: 6px;
      outline: none;
    }

    select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56,189,248,0.35);
    }

    button {
      width: 100%;
      margin-top: 10px;
      padding: 9px 10px;
      border-radius: 999px;
      border: none;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      background: linear-gradient(135deg, #22d3ee, #0ea5e9);
      color: #0b1120;
      box-shadow: 0 10px 25px rgba(56,189,248,0.45);
      transition: transform 0.08s ease, box-shadow 0.08s ease, opacity 0.15s ease;
    }

    button:disabled {
      opacity: 0.45;
      cursor: default;
      box-shadow: none;
    }

    button:not(:disabled):active {
      transform: translateY(1px);
      box-shadow: 0 5px 15px rgba(56,189,248,0.35);
    }

    .helper-text {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    /* Lesson header */
    .lesson-header-main {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }

    #lessonTitle {
      font-weight: 600;
      font-size: 14px;
    }

    #lessonMeta {
      font-size: 12px;
      color: var(--text-muted);
    }

    .chip {
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      background: rgba(34,197,94,0.12);
      color: #4ade80;
      border: 1px solid rgba(74,222,128,0.4);
    }

    /* Tabs */
    .tabs {
      display: flex;
      margin-top: 8px;
      margin-bottom: 6px;
      background: #020617;
      border-radius: 999px;
      border: 1px solid #1f2937;
      padding: 3px;
    }
    .tab {
      flex: 1;
      text-align: center;
      font-size: 12px;
      padding: 6px 0;
      border-radius: 999px;
      cursor: pointer;
      user-select: none;
      color: var(--text-muted);
    }
    .tab.active {
      background: var(--accent-soft);
      color: var(--accent);
      font-weight: 600;
    }

    .tab-content {
      margin-top: 8px;
      font-size: 14px;
      line-height: 1.5;
    }

    .card-inner {
      background: #020617;
      border-radius: 12px;
      padding: 10px;
      border: 1px solid #111827;
    }

    pre {
      margin: 0;
    }

    iframe {
      width: 100%;
      min-height: 220px;
      border-radius: 12px;
      border: none;
      background: #020617;
    }

    .option {
      margin-bottom: 6px;
      display: block;
      font-size: 13px;
    }

    .option input {
      margin-right: 6px;
    }

    .result {
      margin-top: 8px;
      font-weight: 600;
      font-size: 13px;
    }

    .result.ok {
      color: var(--success);
    }
    .result.bad {
      color: var(--danger);
    }

    .footer {
      text-align: center;
      margin-top: 10px;
      font-size: 11px;
      color: var(--text-muted);
      opacity: 0.7;
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- –í–µ—Ä—Ö–Ω—è—è "–∫–∞–ø—Å—É–ª–∞" -->
    <div class="topbar">
      <div>
        <div class="topbar-title">Mini LMS</div>
        <div class="topbar-sub">–ö–ª–∞—Å—Å ‚Ä¢ –ë”©–ª—ñ–º ‚Ä¢ –¢–∞“õ—ã—Ä—ã–ø ‚Ä¢ –¢–µ—Å—Ç</div>
      </div>
      <div class="topbar-badge">Telegram WebApp</div>
    </div>

    <!-- –ë–ª–æ–∫ –≤—ã–±–æ—Ä–∞ —É—Ä–æ–∫–∞ -->
    <div class="card">
      <div class="card-title">–°–∞–±–∞“õ—Ç—ã —Ç–∞“£–¥–∞“£—ã–∑</div>

      <label>–ö–ª–∞—Å—Å</label>
      <select id="classSelect">
        <option value="">‚Äì —Ç–∞“£–¥–∞“£—ã–∑ ‚Äì</option>
      </select>

      <label>–ë”©–ª—ñ–º</label>
      <select id="sectionSelect" disabled>
        <option value="">‚Äì —Ç–∞“£–¥–∞“£—ã–∑ ‚Äì</option>
      </select>

      <label>–¢–∞“õ—ã—Ä—ã–ø</label>
      <select id="topicSelect" disabled>
        <option value="">‚Äì —Ç–∞“£–¥–∞“£—ã–∑ ‚Äì</option>
      </select>

      <button id="openLessonBtn" disabled>–°–∞–±–∞“õ—Ç—ã –∞—à—É</button>
      <div class="helper-text">
        –ê–ª–¥—ã–º–µ–Ω –∫–ª–∞—Å—Å, —Å–æ–¥–∞–Ω –∫–µ–π—ñ–Ω –±”©–ª—ñ–º –º–µ–Ω —Ç–∞“õ—ã—Ä—ã–ø—Ç—ã —Ç–∞“£–¥–∞“£—ã–∑.
      </div>
    </div>

    <!-- –ë–ª–æ–∫ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —É—Ä–æ–∫–∞ -->
    <div id="lessonArea" style="display:none;">
      <div class="card">
        <div class="lesson-header-main">
          <div id="lessonTitle"></div>
          <div class="chip">–ë–µ–ª—Å–µ–Ω–¥—ñ —Å–∞–±–∞“õ</div>
        </div>
        <div id="lessonMeta"></div>

        <div class="tabs">
          <div class="tab active" data-tab="theory">–¢–µ–æ—Ä–∏—è</div>
          <div class="tab" data-tab="presentation">–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è</div>
          <div class="tab" data-tab="video">–í–∏–¥–µ–æ</div>
          <div class="tab" data-tab="test">–¢–µ—Å—Ç</div>
        </div>

        <div class="tab-content" id="tabContent"></div>
      </div>
    </div>

    <div class="footer">
      üß† –û“õ—ã—Ç—É—à—ã“ì–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—Ç—ñ–∫ –º–∏–Ω–∏-LMS
    </div>
  </div>

  <script>
    // Telegram WebApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
    const tg = window.Telegram ? window.Telegram.WebApp : null;
    if (tg) {
      tg.expand();
      tg.ready();
    }

    // ==== –î–ê–ù–ù–´–ï –£–†–û–ö–û–í ===========================================
    const lessonsData = [
      {
        className: "8-—Å—ã–Ω—ã–ø",
        sections: [
          {
            sectionName: "–ö–æ–º–ø—å—é—Ç–µ—Ä–ª—ñ–∫ –∂–µ–ª—ñ–ª–µ—Ä",
            topics: [
              {
                topicName: "IP –º–µ–∫–µ–Ω–∂–∞–π –∂”ô–Ω–µ –º–∞—Å–∫–∞",
                theory: `
IP –º–µ–∫–µ–Ω–∂–∞–π ‚Äì –∂–µ–ª—ñ–¥–µ–≥—ñ ”ô—Ä–±—ñ—Ä “õ“±—Ä—ã–ª“ì—ã“ì–∞ –±–µ—Ä—ñ–ª–µ—Ç—ñ–Ω –±—ñ—Ä–µ–≥–µ–π –∞–¥—Ä–µ—Å.
–ú–∞—Å–∫–∞ ‚Äì –∂–µ–ª—ñ –º–µ–Ω —Ö–æ—Å—Ç –±”©–ª—ñ–≥—ñ–Ω –∞–∂—ã—Ä–∞—Ç—É“ì–∞ –∞—Ä–Ω–∞–ª“ì–∞–Ω “õ—ã–∑–º–µ—Ç—Ç—ñ–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä.
–ú—ã—Å–∞–ª—ã: 192.168.1.10 / 255.255.255.0

IP –º–µ–∫–µ–Ω–∂–∞–π 4 –±”©–ª—ñ–∫—Ç–µ–Ω —Ç“±—Ä–∞–¥—ã (0‚Äì255 –∞—Ä–∞–ª—ã“ì—ã–Ω–¥–∞“ì—ã —Å–∞–Ω–¥–∞—Ä), –Ω“Ø–∫—Ç–µ–º–µ–Ω –±”©–ª—ñ–Ω–µ–¥—ñ.
–ú–∞—Å–∫–∞ –∞—Ä“õ—ã–ª—ã –∂–µ–ª—ñ–≥–µ “õ–∞–Ω—à–∞ —Ö–æ—Å—Ç “õ–æ—Å—É“ì–∞ –±–æ–ª–∞—Ç—ã–Ω—ã–Ω –∞–Ω—ã“õ—Ç–∞–π–º—ã–∑.
                `,
                presentationUrl: "https://example.com/ip-slides.pdf",
                videoUrl: "https://www.youtube.com/embed/dQw4w9WgXcQ",
                test: [
                  {
                    question: "IP –º–µ–∫–µ–Ω–∂–∞–π –Ω–µ “Ø—à—ñ–Ω “õ–æ–ª–¥–∞–Ω—ã–ª–∞–¥—ã?",
                    options: [
                      "“ö“±—Ä—ã–ª“ì—ã–Ω—ã“£ –∂–µ–ª—ñ–¥–µ–≥—ñ –±—ñ—Ä–µ–≥–µ–π –∞–¥—Ä–µ—Å—ñ–Ω –∫”©—Ä—Å–µ—Ç—É “Ø—à—ñ–Ω",
                      "–§–∞–π–ª ”©–ª—à–µ–º—ñ–Ω ”©–ª—à–µ—É “Ø—à—ñ–Ω",
                      "–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä –∂–∏—ñ–ª—ñ–≥—ñ–Ω –±–µ–ª–≥—ñ–ª–µ—É “Ø—à—ñ–Ω",
                      "–ú–æ–Ω–∏—Ç–æ—Ä —Ä“±“õ—Å–∞—Ç –µ—Ç—ñ–ª—É—ñ–Ω –∫”©—Ä—Å–µ—Ç—É “Ø—à—ñ–Ω"
                    ],
                    correctIndex: 0
                  },
                  {
                    question: "–ú–∞—Å–∫–∞ –Ω–µ “Ø—à—ñ–Ω –∫–µ—Ä–µ–∫?",
                    options: [
                      "“ö“±—Ä—ã–ª“ì—ã–Ω—ã“£ –∞—Ç—ã–Ω –∫”©—Ä—Å–µ—Ç—É “Ø—à—ñ–Ω",
                      "–ñ–µ–ª—ñ –∂”ô–Ω–µ —Ö–æ—Å—Ç –±”©–ª—ñ–≥—ñ–Ω –±”©–ª—É “Ø—à—ñ–Ω",
                      "–ñ–∞–¥—ã –∫”©–ª–µ–º—ñ–Ω –∞–Ω—ã“õ—Ç–∞—É “Ø—à—ñ–Ω",
                      "–î—ã–±—ã—Å –∫–∞—Ä—Ç–∞—Å—ã–Ω –±–∞–ø—Ç–∞—É “Ø—à—ñ–Ω"
                    ],
                    correctIndex: 1
                  }
                ]
              }
            ]
          }
        ]
      },
      // –∫–µ–π—ñ–Ω –æ—Å—ã–Ω–¥–∞ –±–∞—Å“õ–∞ —Å—ã–Ω—ã–ø—Ç–∞—Ä –º–µ–Ω –±”©–ª—ñ–º–¥–µ—Ä–¥—ñ “õ–æ—Å–∞—Å—ã“£
    ];

    // ==== UI –õ–û–ì–ò–ö–ê ===============================================
    const classSelect   = document.getElementById("classSelect");
    const sectionSelect = document.getElementById("sectionSelect");
    const topicSelect   = document.getElementById("topicSelect");
    const openLessonBtn = document.getElementById("openLessonBtn");
    const lessonArea    = document.getElementById("lessonArea");
    const lessonTitle   = document.getElementById("lessonTitle");
    const lessonMeta    = document.getElementById("lessonMeta");
    const tabContent    = document.getElementById("tabContent");
    const tabs          = document.querySelectorAll(".tab");

    let currentLesson = null; // { cls, sec, topic }

    // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–ø–∏—Å–æ–∫ –∫–ª–∞—Å—Å–æ–≤
    lessonsData.forEach((c, idx) => {
      const opt = document.createElement("option");
      opt.value = idx;
      opt.textContent = c.className;
      classSelect.appendChild(opt);
    });

    classSelect.addEventListener("change", () => {
      const classIndex = classSelect.value;
      sectionSelect.innerHTML = '<option value="">‚Äì —Ç–∞“£–¥–∞“£—ã–∑ ‚Äì</option>';
      topicSelect.innerHTML   = '<option value="">‚Äì —Ç–∞“£–¥–∞“£—ã–∑ ‚Äì</option>';
      sectionSelect.disabled = true;
      topicSelect.disabled   = true;
      openLessonBtn.disabled = true;
      lessonArea.style.display = "none";
      currentLesson = null;

      if (classIndex === "") return;

      const cls = lessonsData[classIndex];
      cls.sections.forEach((s, idx) => {
        const opt = document.createElement("option");
        opt.value = idx;
        opt.textContent = s.sectionName;
        sectionSelect.appendChild(opt);
      });
      sectionSelect.disabled = false;
    });

    sectionSelect.addEventListener("change", () => {
      const classIndex   = classSelect.value;
      const sectionIndex = sectionSelect.value;
      topicSelect.innerHTML = '<option value="">‚Äì —Ç–∞“£–¥–∞“£—ã–∑ ‚Äì</option>';
      topicSelect.disabled  = true;
      openLessonBtn.disabled = true;
      lessonArea.style.display = "none";
      currentLesson = null;

      if (sectionIndex === "") return;

      const sec = lessonsData[classIndex].sections[sectionIndex];
      sec.topics.forEach((t, idx) => {
        const opt = document.createElement("option");
        opt.value = idx;
        opt.textContent = t.topicName;
        topicSelect.appendChild(opt);
      });
      topicSelect.disabled = false;
    });

    topicSelect.addEventListener("change", () => {
      openLessonBtn.disabled = topicSelect.value === "";
      lessonArea.style.display = "none";
    });

    openLessonBtn.addEventListener("click", () => {
      const cIdx = classSelect.value;
      const sIdx = sectionSelect.value;
      const tIdx = topicSelect.value;
      if (cIdx === "" || sIdx === "" || tIdx === "") return;

      const cls   = lessonsData[cIdx];
      const sec   = cls.sections[sIdx];
      const topic = sec.topics[tIdx];

      currentLesson = { cls, sec, topic };
      renderLessonHeader();
      setActiveTab("theory");
      lessonArea.style.display = "block";
    });

    function renderLessonHeader() {
      if (!currentLesson) return;
      lessonTitle.textContent =
        `${currentLesson.cls.className} ‚Ä¢ ${currentLesson.sec.sectionName}`;
      lessonMeta.textContent = currentLesson.topic.topicName;
    }

    function setActiveTab(tabName) {
      tabs.forEach(t => {
        t.classList.toggle("active", t.dataset.tab === tabName);
      });

      if (!currentLesson) return;
      const topic = currentLesson.topic;

      if (tabName === "theory") {
        tabContent.innerHTML = `
          <div class="card-inner">
            <pre style="white-space:pre-wrap; font-family:inherit;">${topic.theory.trim()}</pre>
          </div>
        `;
      } else if (tabName === "presentation") {
        if (topic.presentationUrl) {
          tabContent.innerHTML = `
            <div class="card-inner">
              <p style="font-size:13px; margin-top:0;">
                –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è–Ω—ã –∞—à—É “Ø—à—ñ–Ω —Ç”©–º–µ–Ω–¥–µ–≥—ñ —Å—ñ–ª—Ç–µ–º–µ–Ω—ñ –±–∞—Å—ã“£—ã–∑:
              </p>
              <a href="${topic.presentationUrl}" target="_blank" style="color:#38bdf8; font-size:13px;">
                –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è–Ω—ã –∞—à—É
              </a>
            </div>
          `;
        } else {
          tabContent.innerHTML = `<div class="card-inner">–ë“±–ª —Ç–∞“õ—ã—Ä—ã–ø“õ–∞ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è —Ç—ñ—Ä–∫–µ–ª–º–µ–≥–µ–Ω.</div>`;
        }
      } else if (tabName === "video") {
        if (topic.videoUrl) {
          tabContent.innerHTML = `
            <div class="card-inner">
              <iframe src="${topic.videoUrl}" allowfullscreen></iframe>
            </div>
          `;
        } else {
          tabContent.innerHTML = `<div class="card-inner">–í–∏–¥–µ–æ –∂–æ“õ.</div>`;
        }
      } else if (tabName === "test") {
        if (!topic.test || topic.test.length === 0) {
          tabContent.innerHTML = `<div class="card-inner">–ë“±–ª —Ç–∞“õ—ã—Ä—ã–ø“õ–∞ —Ç–µ—Å—Ç —Å“±—Ä–∞“õ—Ç–∞—Ä—ã “õ–æ—Å—ã–ª–º–∞“ì–∞–Ω.</div>`;
          return;
        }

        const container = document.createElement("div");
        container.className = "card-inner";

        topic.test.forEach((q, qIndex) => {
          const block = document.createElement("div");
          block.style.marginBottom = "12px";

          const qTitle = document.createElement("div");
          qTitle.style.fontWeight = "600";
          qTitle.style.marginBottom = "6px";
          qTitle.style.fontSize = "13px";
          qTitle.textContent = (qIndex + 1) + ". " + q.question;
          block.appendChild(qTitle);

          q.options.forEach((opt, optIndex) => {
            const label = document.createElement("label");
            label.className = "option";

            const input = document.createElement("input");
            input.type = "radio";
            input.name = "q" + qIndex;
            input.value = optIndex;

            label.appendChild(input);
            label.appendChild(document.createTextNode(opt));
            block.appendChild(label);
          });

          container.appendChild(block);
        });

        const checkBtn = document.createElement("button");
        checkBtn.textContent = "–ñ–∞—É–∞–ø—Ç–∞—Ä–¥—ã —Ç–µ–∫—Å–µ—Ä—É";
        checkBtn.style.marginTop = "4px";
        checkBtn.style.marginBottom = "4px";

        const resultBox = document.createElement("div");
        resultBox.className = "result";

        checkBtn.onclick = () => {
          let correct = 0;
          topic.test.forEach((q, qIndex) => {
            const selected = container.querySelector(
              `input[name="q${qIndex}"]:checked`
            );
            if (!selected) return;
            const answerIndex = parseInt(selected.value, 10);
            if (answerIndex === q.correctIndex) correct++;
          });

          resultBox.textContent =
            `–î“±—Ä—ã—Å –∂–∞—É–∞–ø—Ç–∞—Ä: ${correct} / ${topic.test.length}`;
          resultBox.classList.remove("ok", "bad");
          if (correct === topic.test.length) {
            resultBox.classList.add("ok");
          } else {
            resultBox.classList.add("bad");
          }
        };

        container.appendChild(checkBtn);
        container.appendChild(resultBox);

        tabContent.innerHTML = "";
        tabContent.appendChild(container);
      }
    }

    tabs.forEach(t => {
      t.addEventListener("click", () => {
        setActiveTab(t.dataset.tab);
      });
    });

  </script>
</body>
</html>
